name: Continuous Integration (CI)

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
      
jobs:
  build:
    name: Build and test

  runs-on: ubuntu-latest

  steps:
  - name: Checkout
    uses: actions/checkout@master

  - name: Set up Node
    uses: actions/setup-node@v2
    with:
      node-version-file: '.nvmrc'

  - name: Install dependencies
    run: yarn install --frozen-lockfile

  - name: Lint
    run: yarn lint

  - name: Test
    run: yarn test